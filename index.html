<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Interactive To-Do List</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Poppins', sans-serif;
            background-image: linear-gradient(to right top, #6d327c, #485da6, #0081c9, #00a1d6, #12bcca);
        }
        .task-item.completed span {
            text-decoration: line-through;
            color: #9ca3af; /* Tailwind's gray-400 */
        }
        /* Custom focus ring color */
        .form-input:focus {
            outline: none;
            box-shadow: 0 0 0 3px rgba(99, 102, 241, 0.5); /* Indigo-500 with 50% opacity */
        }
    </style>
</head>
<body class="min-h-screen flex items-center justify-center p-4">

    <div class="w-full max-w-2xl bg-white rounded-2xl shadow-2xl p-6 md:p-8">
        
        <!-- Header -->
        <header class="text-center mb-6">
            <h1 class="text-3xl md:text-4xl font-bold text-gray-800">My To-Do List</h1>
            <p id="current-datetime" class="text-gray-500 mt-2">Loading date and time...</p>
        </header>

        <!-- Add Task Form -->
        <div class="flex gap-2 mb-6">
            <input type="text" id="task-input" placeholder="e.g., Learn JavaScript array methods" class="flex-grow p-3 border-2 border-gray-200 rounded-lg form-input transition duration-300">
            <button id="add-task-btn" class="bg-indigo-600 text-white font-semibold px-6 py-3 rounded-lg hover:bg-indigo-700 transition duration-300 shadow-md">Add</button>
        </div>

        <!-- Filters -->
        <div class="flex justify-center gap-2 mb-6">
            <button data-filter="all" class="filter-btn bg-gray-200 text-gray-700 font-semibold px-4 py-2 rounded-lg hover:bg-gray-300 transition duration-300">All</button>
            <button data-filter="pending" class="filter-btn bg-gray-200 text-gray-700 font-semibold px-4 py-2 rounded-lg hover:bg-gray-300 transition duration-300">Pending</button>
            <button data-filter="completed" class="filter-btn bg-gray-200 text-gray-700 font-semibold px-4 py-2 rounded-lg hover:bg-gray-300 transition duration-300">Completed</button>
        </div>

        <!-- Task List -->
        <ul id="task-list" class="space-y-3">
            <!-- Tasks will be dynamically inserted here -->
        </ul>

    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // DOM Elements
            const taskInput = document.getElementById('task-input');
            const addTaskBtn = document.getElementById('add-task-btn');
            const taskList = document.getElementById('task-list');
            const dateTimeDisplay = document.getElementById('current-datetime');
            const filterBtns = document.querySelectorAll('.filter-btn');

            // App State
            let tasks = []; // Array of task objects
            let currentFilter = 'all';

            // --- DATE & TIME ---
            function updateDateTime() {
                const now = new Date();
                const options = { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric', hour: '2-digit', minute: '2-digit', second: '2-digit' };
                dateTimeDisplay.textContent = now.toLocaleDateString('en-US', options);
            }
            setInterval(updateDateTime, 1000);
            updateDateTime();

            // --- CORE FUNCTIONS ---
            function renderTasks() {
                taskList.innerHTML = ''; // Clear current list

                // Filter tasks based on the current filter
                const filteredTasks = tasks.filter(task => {
                    if (currentFilter === 'pending') return !task.completed;
                    if (currentFilter === 'completed') return task.completed;
                    return true; // 'all'
                });

                if (filteredTasks.length === 0) {
                    taskList.innerHTML = `<li class="text-center text-gray-500 p-4">No tasks to show.</li>`;
                    return;
                }

                filteredTasks.forEach(task => {
                    const li = document.createElement('li');
                    li.className = `task-item flex items-center p-3 rounded-lg transition duration-300 ${task.completed ? 'bg-green-100' : 'bg-red-100'}`;
                    if (task.completed) {
                        li.classList.add('completed');
                    }
                    li.setAttribute('data-id', task.id);

                    const taskText = document.createElement('span');
                    taskText.className = 'flex-grow';
                    taskText.textContent = task.text;

                    const completeBtn = document.createElement('button');
                    completeBtn.textContent = task.completed ? 'Undo' : 'Complete';
                    completeBtn.className = `complete-btn font-semibold text-sm px-3 py-1 rounded-md mr-2 transition duration-300 ${task.completed ? 'bg-yellow-500 hover:bg-yellow-600 text-white' : 'bg-green-500 hover:bg-green-600 text-white'}`;
                    
                    const deleteBtn = document.createElement('button');
                    deleteBtn.textContent = 'Delete';
                    deleteBtn.className = 'delete-btn bg-red-500 text-white font-semibold text-sm px-3 py-1 rounded-md hover:bg-red-600 transition duration-300';

                    li.appendChild(taskText);
                    li.appendChild(completeBtn);
                    li.appendChild(deleteBtn);
                    taskList.appendChild(li);
                });
            }

            function addTask() {
                const text = taskInput.value.trim();
                if (text === '') {
                    alert('Please enter a task!');
                    return;
                }
                
                // Create a task object
                const newTask = {
                    id: Date.now(), // Unique ID using timestamp
                    text: text,
                    completed: false
                };

                // Add to the tasks array
                tasks.push(newTask);
                
                taskInput.value = ''; // Clear input
                renderTasks();
            }

            function toggleTaskStatus(taskId) {
                tasks = tasks.map(task => 
                    task.id === taskId ? { ...task, completed: !task.completed } : task
                );
                renderTasks();
            }

            function deleteTask(taskId) {
                tasks = tasks.filter(task => task.id !== taskId);
                renderTasks();
            }
            
            function handleTaskListClick(e) {
                const target = e.target;
                const parentLi = target.closest('li');
                if (!parentLi) return;
                
                const taskId = Number(parentLi.dataset.id);

                if (target.classList.contains('complete-btn')) {
                    toggleTaskStatus(taskId);
                } else if (target.classList.contains('delete-btn')) {
                    deleteTask(taskId);
                }
            }
            
            // --- EVENT LISTENERS ---
            addTaskBtn.addEventListener('click', addTask);
            taskInput.addEventListener('keypress', (e) => {
                if (e.key === 'Enter') {
                    addTask();
                }
            });

            taskList.addEventListener('click', handleTaskListClick);
            
            filterBtns.forEach(btn => {
                btn.addEventListener('click', () => {
                    currentFilter = btn.dataset.filter;
                    // Style active button
                    filterBtns.forEach(b => b.classList.replace('bg-indigo-600', 'bg-gray-200') || b.classList.remove('text-white'));
                    btn.classList.replace('bg-gray-200', 'bg-indigo-600');
                    btn.classList.add('text-white');
                    renderTasks();
                });
            });

            // Initial render
            renderTasks();
            document.querySelector('[data-filter="all"]').click(); // Simulate a click on the 'All' filter initially
        });
    </script>
</body>
</html>
